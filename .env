# .env.example - Workspace-in-a-Box Complete Configuration
# Copy this file to .env and modify the values

############
# [REQUIRED] N8N Configuration
############
N8N_ENCRYPTION_KEY=super-secret-key
N8N_USER_MANAGEMENT_JWT_SECRET=even-more-secret

############
# [REQUIRED] Supabase Secrets
############
POSTGRES_PASSWORD=your-super-secret-and-long-postgres-password
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q
DASHBOARD_USERNAME=supabase
DASHBOARD_PASSWORD=this_password_is_insecure_and_should_be_updated
POOLER_TENANT_ID=your-tenant-id

############
# [REQUIRED] Langfuse Credentials
############
CLICKHOUSE_PASSWORD=super-secret-key-1
MINIO_ROOT_PASSWORD=super-secret-key-2
LANGFUSE_SALT=super-secret-key-3
NEXTAUTH_SECRET=super-secret-key-4
ENCRYPTION_KEY=generate-with-openssl # generate via `openssl rand -hex 32`

############
# [REQUIRED] Workspace-in-a-Box Configuration
############

# Editor Selection (zed or vscode)
SELECTED_EDITOR=zed

# Desktop Environment
DESKTOP_PASSWORD=password
DESKTOP_TIMEZONE=Europe/Berlin

# Guacamole Database
GUAC_POSTGRES_PASSWORD=secure-guacamole-password

# WebUI Configuration  
WEBUI_SECRET_KEY=generate-this-secret-key

############
# [OPTIONAL] Flowise Configuration
############
FLOWISE_USERNAME=
FLOWISE_PASSWORD=

############
# [OPTIONAL] Productivity Services
############

# AppFlowy Configuration
APPFLOWY_DATABASE_URL=postgres://postgres:${POSTGRES_PASSWORD}@db:5432/appflowy

# AFFINE Configuration
AFFINE_DATABASE_URL=postgres://postgres:${POSTGRES_PASSWORD}@db:5432/affine
AFFINE_REDIS_HOST=redis
AFFINE_REDIS_PORT=6379
AFFINE_SERVER_HOST=0.0.0.0
AFFINE_SERVER_PORT=3010

############
# [OPTIONAL] Development Services
############

# GitLab Configuration
GITLAB_POSTGRES_DB=gitlab
GITLAB_POSTGRES_USER=gitlab
GITLAB_POSTGRES_PASSWORD=secure-gitlab-db-password
GITLAB_ROOT_PASSWORD=change-this-gitlab-root-password

############
# [OPTIONAL] Production - Caddy Config
############
# Uncomment and set these for production deployment with custom domains

# N8N_HOSTNAME=n8n.yourdomain.com
# WEBUI_HOSTNAME=openwebui.yourdomain.com
# FLOWISE_HOSTNAME=flowise.yourdomain.com
# SUPABASE_HOSTNAME=supabase.yourdomain.com
# LANGFUSE_HOSTNAME=langfuse.yourdomain.com
# OLLAMA_HOSTNAME=ollama.yourdomain.com
# SEARXNG_HOSTNAME=searxng.yourdomain.com
# GUACAMOLE_HOSTNAME=desktop.yourdomain.com
# LETSENCRYPT_EMAIL=admin@yourdomain.com

############
# [OPTIONAL] SearXNG Configuration
############
SEARXNG_UWSGI_WORKERS=4
SEARXNG_UWSGI_THREADS=4

############
# [SYSTEM] Database Configuration
############
POSTGRES_HOST=db
POSTGRES_DB=postgres
POSTGRES_PORT=5432

############
# [SYSTEM] Supavisor - Database Pooler
############
POOLER_PROXY_PORT_TRANSACTION=6543
POOLER_DEFAULT_POOL_SIZE=20
POOLER_MAX_CLIENT_CONN=100
SECRET_KEY_BASE=UpNVNtn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq
VAULT_ENC_KEY=your-32-character-encryption-key

############
# [SYSTEM] API Proxy - Kong Configuration
############
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443

############
# [SYSTEM] API - PostgREST Configuration
############
PGRST_DB_SCHEMAS=public,storage,graphql_public

############
# [SYSTEM] Auth - GoTrue Authentication Server
############

# General
SITE_URL=http://localhost:3000
ADDITIONAL_REDIRECT_URLS=
JWT_EXPIRY=3600
DISABLE_SIGNUP=false
API_EXTERNAL_URL=http://localhost:8000

# Mailer Config
MAILER_URLPATHS_CONFIRMATION="/auth/v1/verify"
MAILER_URLPATHS_INVITE="/auth/v1/verify"
MAILER_URLPATHS_RECOVERY="/auth/v1/verify"
MAILER_URLPATHS_EMAIL_CHANGE="/auth/v1/verify"

# Email Auth
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=false
SMTP_ADMIN_EMAIL=admin@example.com
SMTP_HOST=supabase-mail
SMTP_PORT=2500
SMTP_USER=fake_mail_user
SMTP_PASS=fake_mail_password
SMTP_SENDER_NAME=fake_sender
ENABLE_ANONYMOUS_USERS=false

# Phone Auth
ENABLE_PHONE_SIGNUP=true
ENABLE_PHONE_AUTOCONFIRM=true

############
# [SYSTEM] Studio - Dashboard Configuration
############
STUDIO_DEFAULT_ORGANIZATION=Default Organization
STUDIO_DEFAULT_PROJECT=Default Project
STUDIO_PORT=3000
SUPABASE_PUBLIC_URL=http://localhost:8000

# Enable webp support
IMGPROXY_ENABLE_WEBP_DETECTION=true

# OpenAI API key for SQL Editor Assistant (optional)
OPENAI_API_KEY=

############
# [SYSTEM] Functions Configuration
############
FUNCTIONS_VERIFY_JWT=false

############
# [SYSTEM] Logs - Logflare Configuration
############
LOGFLARE_LOGGER_BACKEND_API_KEY=your-super-secret-and-long-logflare-key
LOGFLARE_API_KEY=your-super-secret-and-long-logflare-key

# Docker socket location
DOCKER_SOCKET_LOCATION=/var/run/docker.sock

# Google Cloud Project details (optional)
GOOGLE_PROJECT_ID=GOOGLE_PROJECT_ID
GOOGLE_PROJECT_NUMBER=GOOGLE_PROJECT_NUMBER

############
# [SYSTEM] Redis Configuration
############
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_AUTH=LOCALONLYREDIS
REDIS_TLS_ENABLED=false

############
# [SYSTEM] Langfuse Extended Configuration
############
TELEMETRY_ENABLED=true
LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES=true
CLICKHOUSE_MIGRATION_URL=clickhouse://clickhouse:9000
CLICKHOUSE_URL=http://clickhouse:8123
CLICKHOUSE_USER=clickhouse
CLICKHOUSE_CLUSTER_ENABLED=false

# S3-compatible storage for Langfuse
LANGFUSE_S3_EVENT_UPLOAD_BUCKET=langfuse
LANGFUSE_S3_EVENT_UPLOAD_REGION=auto
LANGFUSE_S3_EVENT_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_EVENT_UPLOAD_SECRET_ACCESS_KEY=${MINIO_ROOT_PASSWORD}
LANGFUSE_S3_EVENT_UPLOAD_ENDPOINT=http://minio:9000
LANGFUSE_S3_EVENT_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_EVENT_UPLOAD_PREFIX=events/

LANGFUSE_S3_MEDIA_UPLOAD_BUCKET=langfuse
LANGFUSE_S3_MEDIA_UPLOAD_REGION=auto
LANGFUSE_S3_MEDIA_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_MEDIA_UPLOAD_SECRET_ACCESS_KEY=${MINIO_ROOT_PASSWORD}
LANGFUSE_S3_MEDIA_UPLOAD_ENDPOINT=http://localhost:9090
LANGFUSE_S3_MEDIA_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_MEDIA_UPLOAD_PREFIX=media/

LANGFUSE_S3_BATCH_EXPORT_ENABLED=false
LANGFUSE_S3_BATCH_EXPORT_BUCKET=langfuse
LANGFUSE_S3_BATCH_EXPORT_PREFIX=exports/
LANGFUSE_S3_BATCH_EXPORT_REGION=auto
LANGFUSE_S3_BATCH_EXPORT_ENDPOINT=http://minio:9000
LANGFUSE_S3_BATCH_EXPORT_EXTERNAL_ENDPOINT=http://localhost:9090
LANGFUSE_S3_BATCH_EXPORT_ACCESS_KEY_ID=minio
LANGFUSE_S3_BATCH_EXPORT_SECRET_ACCESS_KEY=${MINIO_ROOT_PASSWORD}
LANGFUSE_S3_BATCH_EXPORT_FORCE_PATH_STYLE=true

LANGFUSE_INGESTION_QUEUE_DELAY_MS=
LANGFUSE_INGESTION_CLICKHOUSE_WRITE_INTERVAL_MS=

############
# [SYSTEM] Generic Configuration
############
GENERIC_TIMEZONE=Europe/Berlin
POSTGRES_VERSION=latest
